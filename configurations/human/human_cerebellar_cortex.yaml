name: DBBS Human cerebellum configuration v4.1
packages:
  - cerebellum~=0.3.0
  - bsb-core~=4.5
  - bsb-json~=4.1
  - bsb-yaml~=4.1
  - bsb-hdf5~=4.0
storage:
  engine: hdf5
  root: cerebellum.hdf5
network:
  chunk_size: [200, 200, 200]
  x: 1000
  y: 1000
  z: 970
regions:
  cerebellar_cortex:
    type: stack
    children:
      - granular_layer
      - purkinje_layer
      - b_molecular_layer
      - t_molecular_layer
partitions:
  granular_layer:
    thickness: 610
  purkinje_layer:
    thickness: 30
  b_molecular_layer:
    thickness: 110
  t_molecular_layer:
    thickness: 220
$import:
  ref: ../../morphologies/human/morphologies.yaml#/
  values:
    - morphologies
cell_types:
  glomerulus:
    spatial:
      density: 1.5e-4
      radius: 3.0
    plotting:
      display_name: Glomerulus
  mossy_fibers:
    spatial:
      count_ratio: 0.05
      radius: 1
      relative_to: glomerulus
  granule_cell:
    spatial:
      density: 1.704e-3
      morphologies:
        - GranuleCell_326
        - GranuleCell_617
      radius: 2.9
    plotting:
      display_name: Granule cell
      opacity: 0.3
  golgi_cell:
    spatial:
      density: 1.42e-6
      morphologies:
        - GolgiCell
      radius: 8
    plotting:
      display_name: Golgi cell
  purkinje_cell:
    spatial:
      morphologies:
        - PurkinjeCell_1
        - PurkinjeCell_2
      planar_density: 0.000228
      radius: 15
    plotting:
      display_name: Purkinje cell
  basket_cell:
    spatial:
      density: 0.23751e-4
      morphologies:
        - BasketCell
      radius: 12
    plotting:
      display_name: Basket cell
  stellate_cell:
    spatial:
      density: 0.14794e-4
      morphologies:
        - StellateCell
      radius: 8
    plotting:
      display_name: Stellate cell
placement:
  granular_layer_innervation:
    strategy: bsb.placement.RandomPlacement
    partitions:
      - granular_layer
    cell_types:
      - mossy_fibers
  granular_layer_placement:
    strategy: bsb.placement.RandomPlacement
    partitions:
      - granular_layer
    cell_types:
      - golgi_cell
      - glomerulus
  granule_cell_placement:
    strategy: bsb.placement.RandomPlacement
    distribute:
      morphologies:
        strategy: cerebellum.placement.binary_distributor.DepthDistributorBinary
        separating_h: 300
        below_morphologies:
          - GranuleCell_617
        above_morphologies:
          - GranuleCell_326
    partitions:
      - granular_layer
    cell_types:
      - granule_cell
  purkinje_layer_placement:
    strategy: bsb.placement.ParallelArrayPlacement
    partitions:
      - purkinje_layer
    cell_types:
      - purkinje_cell
    spacing_x: 350
    angle: 70
  basket_layer_placement:
    strategy: bsb.placement.RandomPlacement
    partitions:
      - b_molecular_layer
    cell_types:
      - basket_cell
  stellate_layer_placement:
    strategy: bsb.placement.RandomPlacement
    partitions:
      - t_molecular_layer
    cell_types:
      - stellate_cell
connectivity:
  mossy_fibers_to_glomerulus:
    strategy: cerebellum.connectome.to_glomerulus.ConnectomeMossyGlomerulus
    presynaptic:
      cell_types:
        - mossy_fibers
    postsynaptic:
      cell_types:
        - glomerulus
    x_length: 60
    y_length: 20
  glomerulus_to_granule:
    strategy: cerebellum.connectome.glomerulus_granule.ConnectomeGlomerulusGranule
    presynaptic:
      cell_types:
        - glomerulus
    postsynaptic:
      cell_types:
        - granule_cell
      morphology_labels:
        - dendrites
    mf_glom_strat: mossy_fibers_to_glomerulus
    mf_cell_type: mossy_fibers
    radius: 40
    convergence: 4
  glomerulus_to_golgi:
    strategy: cerebellum.connectome.glomerulus_golgi.ConnectomeGlomerulusGolgi
    presynaptic:
      cell_types:
        - glomerulus
    postsynaptic:
      cell_types:
        - golgi_cell
      morphology_labels:
        - basal_dendrites
    radius: 100
  golgi_to_granule:
    strategy: cerebellum.connectome.golgi_glomerulus.ConnectomeGolgiGlomerulus
    presynaptic:
      cell_types:
        - golgi_cell
      morphology_labels:
        - axon
    postsynaptic:
      cell_types:
        - granule_cell
    glom_post_strat: glomerulus_to_granule
    glom_cell_type: glomerulus
    radius: 200
    divergence: 40
  golgi_to_golgi:
    strategy: bsb.connectivity.VoxelIntersection
    presynaptic:
      cell_types:
        - golgi_cell
      morphology_labels:
        - axon
    postsynaptic:
      cell_types:
        - golgi_cell
      morphology_labels:
        - basal_dendrites
    affinity: 0.1
    contacts:
      distribution: norm
      loc: 160
      scale: 5
  ascending_axon_to_golgi:
    strategy: bsb.connectivity.VoxelIntersection
    presynaptic:
      cell_types:
        - granule_cell
      morphology_labels:
        - ascending_axon
    postsynaptic:
      cell_types:
        - golgi_cell
      morphology_labels:
        - basal_dendrites
    voxels_pre: 500
    voxels_post: 500
    affinity: 0.011
  parallel_fiber_to_golgi:
    strategy: bsb.connectivity.VoxelIntersection
    presynaptic:
      cell_types:
        - granule_cell
      morphology_labels:
        - parallel_fiber
    postsynaptic:
      cell_types:
        - golgi_cell
      morphology_labels:
        - apical_dendrites
    affinity: 0.0098
    voxels_pre: 500
    voxels_post: 500
  ascending_axon_to_purkinje:
    strategy: bsb.connectivity.VoxelIntersection
    presynaptic:
      cell_types:
        - granule_cell
      morphology_labels:
        - ascending_axon
    postsynaptic:
      cell_types:
        - purkinje_cell
      morphology_labels:
        - aa_targets
    voxels_pre: 500
    voxels_post: 500
    affinity: 0.014
  parallel_fiber_to_purkinje:
    strategy: bsb.connectivity.VoxelIntersection
    presynaptic:
      cell_types:
        - granule_cell
      morphology_labels:
        - parallel_fiber
    postsynaptic:
      cell_types:
        - purkinje_cell
      morphology_labels:
        - pf_targets
    voxels_pre: 500
    voxels_post: 500
    affinity: 0.0118
  parallel_fiber_to_basket:
    strategy: bsb.connectivity.geometric.MorphologyToShapeIntersection
    presynaptic:
      cell_types:
        - granule_cell
      morphology_labels:
        - parallel_fiber
    postsynaptic:
      cell_types:
        - basket_cell
      shapes_composition:
        voxel_size: 20
        shapes:
        - type: Cylinder
          origin: [-10, 0, 0]
          top_center: [10, 0, 0]
          radius: 150
        labels:
          - dendrites
    affinity: 0.01
    pruning_ratio: 0.1
  parallel_fiber_to_stellate:
    strategy: bsb.connectivity.geometric.MorphologyToShapeIntersection
    presynaptic:
      cell_types:
      - granule_cell
      morphology_labels:
      - parallel_fiber
    postsynaptic:
      cell_types:
      - stellate_cell
      shapes_composition:
        voxel_size: 10
        shapes:
        - type: Cylinder
          origin: [0, -10, 0]
          top_center: [0, 10, 0]
          radius: 150
        labels:
        - - dendrites
      morphology_labels:
      - dendrites
    affinity: 0.005
    pruning_ratio: 0.0075
  stellate_to_purkinje:
    strategy: bsb.connectivity.geometric.ShapeToMorphologyIntersection
    presynaptic:
      cell_types:
        - stellate_cell
      shapes_composition:
        voxel_size: 10
        shapes:
        - type: Ellipsoid
          origin: [0, 25, 0]
          lambdas: [100, 40, 100]
          v0: [1, 0, 0]
          v1: [0, 1, 0]
          v2: [0, 0, 1]
        labels:
          - axon
      morphology_labels:
        - axon
    postsynaptic:
      cell_types:
      - purkinje_cell
      morphology_labels:
      - sc_targets
    affinity: 1.0
    pruning_ratio: 0.00009
  basket_to_purkinje:
    strategy: cerebellum.connectome.basket_purkinje.ConnectomeBasketPurkinje
    axon_length: 1200
    basket_radius: 30
    presynaptic:
      cell_types:
        - basket_cell
    postsynaptic:
      cell_types:
        - purkinje_cell
      morphology_labels:
        - soma
    affinity: 0.05
  basket_to_basket:
    strategy: bsb.connectivity.geometric.ShapeToShapeIntersection
    presynaptic:
      cell_types:
        - basket_cell
      shapes_composition:
        voxel_size: 20
        shapes:
        - type: Ellipsoid
          origin: [0, 25, 0]
          lambdas: [1000, 100, 100]
          v0: [1, 0, 0]
          v1: [0, 1, 0]
          v2: [0, 0, 1]
        labels:
          - axon
    postsynaptic:
      cell_types:
        - basket_cell
      shapes_composition:
        voxel_size: 20
        shapes:
        - type: Cylinder
          origin: [-10, 0, 0]
          top_center: [10, 0, 0]
          radius: 150
        labels:
          - dendrites
    affinity: 1.0
    pruning_ratio: 0.00075
  stellate_to_stellate:
    strategy: bsb.connectivity.geometric.ShapeToShapeIntersection
    presynaptic:
      cell_types:
        - stellate_cell
      shapes_composition:
        voxel_size: 10
        shapes:
        - type: Ellipsoid
          origin: [0, 25, 0]
          lambdas: [100, 40, 100]
          v0: [1, 0, 0]
          v1: [0, 1, 0]
          v2: [0, 0, 1]
        labels:
          - axon
      morphology_labels:
        - axon
    postsynaptic:
      cell_types:
        - stellate_cell
      shapes_composition:
        voxel_size: 10
        shapes:
        - type: Cylinder
          origin: [0, -10.0, 0]
          top_center: [0, 10.0, 0]
          radius: 150
        labels:
          - dendrites
    affinity: 1.0
    pruning_ratio: 0.0025
