{
  "name": "DBBS Mouse cerebellum configuration v4.0",
  "storage": {
    "engine": "hdf5",
    "root": "cerebellum.hdf5"
  },
  "network": {
    "x": 150.0,
    "y": 400.0,
    "z": 150.0,
    "chunk_size": [50, 50, 50]
  },
  "morphologies": [
    "morphologies/GranuleCell.swc",
    {
      "name": "GolgiCell",
      "file": "morphologies/GolgiCell_mouse.swc"
    },
    "morphologies/PurkinjeCell.swc",
    "morphologies/BasketCell.swc",
    "morphologies/StellateCell.swc"
  ],
  "partitions": {
    "dcn_layer": {
      "thickness": 600.0,
      "stack_index": 0
    },
    "granular_layer": {
      "thickness": 150.0,
      "stack_index": 1
    },
    "purkinje_layer": {
      "thickness": 30.0,
      "stack_index": 2
    },
    "b_molecular_layer": {
      "thickness": 50.0,
      "stack_index": 3
    },
    "t_molecular_layer": {
      "thickness": 100.0,
      "stack_index": 4
    },
    "io_layer": {
      "thickness": 15.0
    }
  },
  "regions": {
    "cerebellar_cortex": {
      "type": "stack",
      "children": ["dcn_layer", "granular_layer", "purkinje_layer", "b_molecular_layer", "t_molecular_layer"]
    },
    "inferior_olive": {
      "type": "stack",
      "children": ["io_layer"]
    }
  },
  "cell_types": {
    "granule_cell": {
      "spatial": {
        "radius": 2.5,
        "density": 3.9e-3,
        "geometry": {
          "pf_height": 126,
          "pf_height_sd": 15
        },
        "morphologies": ["GranuleCell"]
      },
      "plotting": {
        "display_name": "Granule cell",
        "color": "#e81005",
        "opacity": 0.3
      }
    },
    "mossy_fibers": {
      "spatial": {
        "radius": 1.0,
        "relative_to": "glomerulus",
        "count_ratio": 0.05
      }
    },
    "glomerulus": {
      "relay": true,
      "spatial": {
        "radius": 1.5,
        "density": 3e-4
      },
      "plotting": {
        "display_name": "Glomerulus",
        "color": "#6F6F70"
      }
    },
    "purkinje_cell": {
      "spatial": {
        "radius": 7.5,
        "planar_density": 0.0017,
        "morphologies": ["PurkinjeCell"]
      },
      "plotting": {
        "display_name": "Purkinje cell",
        "color": "#068f0d"
      }
    },
    "golgi_cell": {
      "spatial": {
        "radius": 8.0,
        "density": 9e-6,
        "geometry": {
          "axon_radius": 160
        },
        "morphologies": [
          {
            "names": ["GolgiCell"]
          }
        ]
      },
      "plotting": {
        "display_name": "Golgi cell",
        "color": "#1009e3"
      }
    },
    "stellate_cell": {
      "spatial": {
        "radius": 4.0,
        "density": 0.5e-4,
        "morphologies": [
          {
            "names": ["StellateCell"]
          }
        ]
      },
      "plotting": {
        "display_name": "Stellate cell",
        "color": "#f5bb1d"
      }
    },
    "basket_cell": {
      "spatial": {
        "radius": 6.0,
        "density": 0.5e-4,
        "morphologies": [
          {
            "names": ["BasketCell"]
          }
        ]
      },
      "plotting": {
        "display_name": "Basket cell",
        "color": "#f5830a"
      }
    },
    "dcn_cell": {
      "spatial": {
        "radius": 10.0,
        "relative_to": "purkinje_cell",
        "count_ratio": 0.090909
      },
      "plotting": {
        "display_name": "DCN cell",
        "color": "#080808"
      }
    },
    "dcn_interneuron": {
      "spatial": {
        "radius": 6.0
      },
      "plotting": {
        "display_name": "DCN interneuron",
        "color": "#260582"
      }
    },
    "io_cell": {
      "spatial": {
        "radius": 7.5,
        "density": 1.52e-5
      },
      "plotting": {
        "display_name": "io cell",
        "color": "#7d1bbf"
      }
    }
  },
  "placement": {
    "granular_layer_innervation": {
      "strategy": "bsb.placement.RandomPlacement",
      "partitions": ["granular_layer"],
      "cell_types": ["mossy_fibers"]
    },
    "granular_layer_placement": {
      "strategy": "bsb.placement.RandomPlacement",
      "partitions": ["granular_layer"],
      "cell_types": ["granule_cell", "golgi_cell", "glomerulus"]
    },
    "purkinje_layer_placement": {
      "strategy": "bsb.placement.ParallelArrayPlacement",
      "partitions": ["purkinje_layer"],
      "cell_types": ["purkinje_cell"],
      "spacing_x": 130.0,
      "angle": 70.0
    },
    "molecular_layer_placement": {
      "strategy": "bsb.placement.RandomPlacement",
      "partitions": ["b_molecular_layer", "t_molecular_layer"],
      "cell_types": ["stellate_cell", "basket_cell"],
      "restrict": {
        "basket_cell": ["b_molecular_layer"],
        "stellate_cell": ["t_molecular_layer"]
      }
    }
  },
  "connectivity": {
    "mossy_fibers_to_glomerulus": {
      "strategy": "cerebellum.connectome.mossy_glomerulus.ConnectomeMossyGlomerulus",
      "presynaptic": {
        "cell_types": ["mossy_fibers"]
      },
      "postsynaptic": {
        "cell_types": ["glomerulus"]
      },
      "x_length" : 60,
      "z_length" : 20
    },
    "glomerulus_to_granule": {
      "strategy": "cerebellum.connectome.glomerulus_granule.ConnectomeGlomerulusGranule",
      "presynaptic": {
        "cell_types": ["glomerulus"]
      },
      "postsynaptic": {
        "cell_types": ["granule_cell"],
        "morphology_labels" : ["dendrites"]
      },
      "prepresynaptic" : {
        "cell_types" : ["mossy_fibers"]
      },
      "x_length" : 100,
      "z_length" : 100,
      "max_radius" : 40,
      "convergence" : 4
    },
    "glomerulus_to_golgi": {
      "strategy": "cerebellum.connectome.glomerulus_golgi.ConnectomeGlomerulusGolgi",
      "presynaptic": {
        "cell_types": ["glomerulus"]
      },
      "postsynaptic": {
        "cell_types": ["golgi_cell"],
        "morphology_labels" : ["basal_dendrites"]
      },
      "radius" : 50
    },
    "golgi_to_glomerulus": {
      "strategy": "cerebellum.connectome.golgi_glomerulus_granule.ConnectomeGolgiGlomerulusGranule",
      "presynaptic": {
        "cell_types": ["golgi_cell"],
        "morphology_labels" : ["axon"]
      },
      "postsynaptic": {
        "cell_types": ["granule_cell"]
      },
      "intermediate": {
        "cell_types": ["glomerulus"]
      },
      "radius" : 50,
      "convergence" : 40
    },
    "golgi_to_golgi": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["golgi_cell"],
        "morphology_labels": ["axon"]
      },
      "postsynaptic": {
        "cell_types": ["golgi_cell"],
        "morphology_labels": ["basal dendrites"]
      },
      "affinity": 0.5,
      "contacts": {
        "distribution": "norm",
        "loc": 160,
        "scale": 5
      }
    },
    "gap_goc": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["golgi_cell"],
        "morphology_labels": ["basal dendrites"]
      },
      "postsynaptic": {
        "cell_types": ["golgi_cell"],
        "morphology_labels": ["basal dendrites"]
      },
      "affinity": 0.2,
      "contacts": {
        "distribution": "norm",
        "loc": 3,
        "scale": 1
      }
    },
    "ascending_axon_to_golgi": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["granule_cell"],
        "morphology_labels": ["basal_ascending_axondendrites"]
      },
      "postsynaptic": {
        "cell_types": ["golgi_cell"],
        "morphology_labels": ["basal dendrites"]
      }
    },
    "parallel_fiber_to_golgi": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["granule_cell"],
        "morphology_labels": ["parallel_fiber"]
      },
      "postsynaptic": {
        "cell_types": ["golgi_cell"],
        "morphology_labels": ["apical_dendrites"]
      },
      "affinity": 0.1
    },
    "ascending_axon_to_purkinje": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["granule_cell"],
        "morphology_labels": ["ascending_axon"]
      },
      "postsynaptic": {
        "cell_types": ["purkinje_cell"],
        "morphology_labels": ["aa_targets"]
      },
      "affinity": 0.1
    },

    "parallel_fiber_to_purkinje": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["granule_cell"],
        "morphology_labels": ["parallel_fiber"]
      },
      "postsynaptic": {
        "cell_types": ["purkinje_cell"],
        "morphology_labels": ["pf_targets"]
      },
      "affinity": 0.1
    },
    "parallel_fiber_to_basket": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["granule_cell"],
        "morphology_labels": ["parallel_fiber"]
      },
      "postsynaptic": {
        "cell_types": ["basket_cell"],
        "morphology_labels": ["dendrites"]
      },
      "affinity": 0.1
    },

    "parallel_fiber_to_stellate": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["granule_cell"],
        "morphology_labels": ["parallel_fiber"]
      },
      "postsynaptic": {
        "cell_types": ["stellate_cell"],
        "morphology_labels": ["dendrites"]
      },
      "affinity": 0.1
    },
    "stellate_to_purkinje": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["stellate_cell"],
        "morphology_labels": ["axon"]
      },
      "postsynaptic": {
        "cell_types": ["purkinje_cell"],
        "morphology_labels": ["sc_targets"]
      },
      "affinity": 0.1
    },
    "basket_to_purkinje": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["basket_cell"],
        "morphology_labels": ["axon"]
      },
      "postsynaptic": {
        "cell_types": ["purkinje_cell"],
        "morphology_labels": ["soma"]
      }
    },
    "stellate_to_stellate": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["stellate_cell"],
        "morphology_labels": ["axon"]
      },
      "postsynaptic": {
        "cell_types": ["stellate_cell"],
        "morphology_labels": ["dendrites"]
      },
      "affinity": 0.5,
      "contacts": {
        "distribution": "norm",
        "loc": 100,
        "scale":4
      }
    },
    "basket_to_basket": {
      "strategy": "bsb.connectivity.VoxelIntersection",
      "presynaptic": {
        "cell_types": ["basket_cell"],
        "morphology_labels": ["axon"]
      },
      "postsynaptic": {
        "cell_types": ["basket_cell"],
        "morphology_labels": ["dendrites"]
      },
      "affinity": 0.5,
      "contacts": {
        "distribution": "norm",
        "loc": 100,
        "scale":4
      }
    }

  },
  "after_placement": {
    "microzones": {
      "strategy": "bsb.postprocessing.LabelMicrozones",
      "targets": ["purkinje_cell", "dcn_cell", "io_cell"]
    },
    "aa_lengths": {
      "strategy": "bsb.postprocessing.AscendingAxonLengths"
    },
    "dcn_rotations": {
      "strategy": "bsb.postprocessing.DCNRotations"
    }
  }
}
